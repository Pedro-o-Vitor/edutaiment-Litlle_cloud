<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro</title>
<link rel="manifest" href="/manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700&display=swap" rel="stylesheet">
<style>
  body { margin:0; padding:0; font-family:'Fredoka', sans-serif; background: linear-gradient(135deg, #fbc2eb, #a6c0fe);
         display:flex; justify-content:center; align-items:center; min-height:100vh; }
  .container { background: rgba(255,255,255,0.9); padding:2rem; border-radius:25px; text-align:center; width:90%; max-width:400px; box-shadow:0 8px 20px rgba(0,0,0,0.25);}
  input, button { width: 80%; padding:0.8rem; margin:0.5rem 0; border-radius:15px; border:none; }
  input { border:3px solid #f2e2ff; background-color:#f8f0ff; text-align:center; font-size:1rem; }
  button { background: linear-gradient(135deg, #a6c0fe, #fbc2eb); color:white; font-weight:bold; cursor:pointer; }
  button:hover { transform: scale(1.05); }
  #feedback { color:#ff5252; margin-top:10px; font-weight:bold; }
</style>
</head>
<body>

<div class="container">
  <h2>Cadastro</h2>
  <input type="text" id="nome" placeholder="Nome"><br>
  <input type="email" id="email" placeholder="Email"><br>
  <input type="password" id="senha" placeholder="Senha"><br>
  <button onclick="cadastrar()">Cadastrar</button>
  <p>J치 tem conta? <a href="login.html">Login</a></p>
  <p id="feedback"></p>
</div>

<script>
  function cadastrar() {
    const nome = document.getElementById('nome').value.trim();
    const email = document.getElementById('email').value.trim();
    const senha = document.getElementById('senha').value.trim();
    const feedback = document.getElementById('feedback');

    if(!nome || !email || !senha) {
      feedback.textContent = "Preencha todos os campos!";
      return;
    }

    let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

    // Verifica se j치 existe usu치rio com o mesmo email
    if(usuarios.some(u => u.email === email)) {
      feedback.textContent = "Email j치 cadastrado!";
      return;
    }

    usuarios.push({ nome, email, senha, progresso: 0 });
    localStorage.setItem("usuarios", JSON.stringify(usuarios));

    feedback.style.color = "green";
    feedback.textContent = "Cadastro realizado com sucesso!";
    setTimeout(() => { window.location.href = "login.html"; }, 2000);
  }
</script>
<script src="/register-sw.js"></script>
</body>
</html>
